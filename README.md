# ü¶Å Mirobaldo - Chatbot do Sporting Clube Farense

<div align="center">

![Mirobaldo Logo](public/mirobaldo_chatbot.png)

**Um assistente virtual inteligente dedicado √† hist√≥ria e mem√≥ria do Sporting Clube Farense**

[![Node.js](https://img.shields.io/badge/Node.js-v14+-green.svg)](https://nodejs.org/)
[![Express](https://img.shields.io/badge/Express-4.21.2-blue.svg)](https://expressjs.com/)
[![OpenAI](https://img.shields.io/badge/OpenAI-GPT--4o--mini-orange.svg)](https://openai.com/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

</div>

---

## üìñ Sobre o Projeto

Mirobaldo √© um chatbot conversacional que preserva e partilha a rica hist√≥ria do Sporting Clube Farense. Utilizando intelig√™ncia artificial avan√ßada e uma extensa base de dados hist√≥rica, o Mirobaldo oferece respostas detalhadas e precisas sobre:

- üìä **206 biografias** de jogadores, treinadores e figuras hist√≥ricas
- üèÜ **Classifica√ß√µes completas** desde a funda√ß√£o do clube
- ‚öΩ **Resultados de jogos** jornada a jornada
- üìÖ **Relat√≥rios detalhados de √©pocas** completas
- üìö Livros, presidentes e funda√ß√£o do clube

---

## ‚ú® Funcionalidades Principais

### ü§ñ Sistema de Agentes Especializados

O Mirobaldo utiliza **8 agentes especializados** que trabalham de forma inteligente para fornecer informa√ß√µes precisas:

1. **biografiasAgent** - 206 biografias completas com busca fuzzy e normaliza√ß√£o de acentos
2. **epocaDetalhadaAgent** - Relat√≥rios completos de qualquer √©poca (classifica√ß√£o + todos os jogos)
3. **classificacoesAgent** - Hist√≥rico de classifica√ß√µes desde a funda√ß√£o
4. **resultadosAgent** - Resultados detalhados jogo a jogo
5. **jogadoresAgent** - Informa√ß√µes sobre jogadores e plant√©is
6. **livrosAgent** - Biblioteca sobre o clube
7. **presidentesAgent** - Hist√≥ria dos dirigentes
8. **fundacaoAgent** - Hist√≥ria da funda√ß√£o e primeiros anos

### üéØ Caracter√≠sticas T√©cnicas

- ‚úÖ **Respostas instant√¢neas** - Biografias e √©pocas retornam Markdown completo sem processamento GPT
- ‚úÖ **Busca inteligente** - Normaliza√ß√£o de acentos e matching fuzzy
- ‚úÖ **Formata√ß√£o rica** - Todas as respostas em Markdown com emojis e tabelas
- ‚úÖ **Zero inven√ß√µes** - Sistema rigoroso que s√≥ retorna dados verificados
- ‚úÖ **M√∫ltiplos formatos** - Aceita "1990/91", "90/91", "1990-91", etc.

---

## üõ†Ô∏è Tecnologias Utilizadas

### Backend

| Tecnologia | Vers√£o | Descri√ß√£o |
|------------|--------|-----------|
| **Node.js** | v14+ | Runtime JavaScript para servidor |
| **Express.js** | 4.21.2 | Framework web minimalista e robusto |
| **OpenAI API** | 4.77.3 | Integra√ß√£o com GPT-4o-mini para processamento de linguagem natural |
| **dotenv** | 16.4.7 | Gest√£o segura de vari√°veis de ambiente |
| **cors** | 2.8.5 | Middleware para Cross-Origin Resource Sharing |
| **body-parser** | 1.20.3 | Parser de requisi√ß√µes HTTP |

### Frontend

| Tecnologia | Descri√ß√£o |
|------------|-----------|
| **HTML5** | Estrutura sem√¢ntica moderna |
| **CSS3** | Estiliza√ß√£o com vari√°veis CSS e design responsivo |
| **JavaScript Vanilla** | Interatividade sem depend√™ncias |
| **Marked.js** | 15.0.6 - Renderiza√ß√£o de Markdown para HTML |
| **Space Grotesk** | Fonte moderna do Google Fonts |
| **JetBrains Mono** | Fonte monoespa√ßada para c√≥digo |

### Ferramentas de Desenvolvimento

| Ferramenta | Vers√£o | Uso |
|------------|--------|-----|
| **nodemon** | 3.1.9 | Hot reload durante desenvolvimento |
| **Git** | - | Controlo de vers√µes |
| **npm** | v6+ | Gestor de pacotes |

---

## üìã Requisitos do Sistema

- **Node.js** v14.0.0 ou superior
- **npm** v6.0.0 ou superior
- **Chave API da OpenAI** ([obter aqui](https://platform.openai.com/api-keys))
- **Sistema Operativo**: macOS, Linux ou Windows
- **Navegador**: Chrome, Firefox, Safari ou Edge (vers√µes recentes)

---

## üöÄ Instala√ß√£o e Configura√ß√£o

### M√©todo 1: Instala√ß√£o R√°pida (Recomendado)

1. **Clone o reposit√≥rio:**
```bash
git clone https://github.com/DrNOFX97/Mirobaldo.git
cd Mirobaldo
```

2. **Instale as depend√™ncias:**
```bash
npm install
```

3. **Configure a API Key da OpenAI:**

Crie o ficheiro `config/.env` e adicione a sua chave:
```bash
OPENAI_API_KEY=sk-sua-chave-aqui
PORT=3000
```

4. **Inicie o servidor:**
```bash
npm start
```

5. **Aceda ao chatbot:**
```
http://localhost:3000
```

### M√©todo 2: Usando Scripts de Gest√£o

O projeto inclui scripts de gest√£o no diret√≥rio `shell_scripts/`:

```bash
# Menu interativo com todas as op√ß√µes
./shell_scripts/iniciar.sh

# Ou comandos diretos:
./shell_scripts/start_chatbot.sh      # Iniciar servidor
./shell_scripts/parar_servidor.sh     # Parar servidor
./shell_scripts/reiniciar_servidor.sh # Reiniciar servidor
./shell_scripts/status_servidor.sh    # Ver status
./shell_scripts/abrir_navegador.sh    # Abrir no navegador
```

---

## üìÅ Estrutura do Projeto

```
Mirobaldo/
‚îú‚îÄ‚îÄ üìÇ src/                          # C√≥digo fonte do servidor
‚îÇ   ‚îú‚îÄ‚îÄ server.js                   # Servidor Express principal
‚îÇ   ‚îî‚îÄ‚îÄ üìÇ agents/                  # Agentes especializados (8)
‚îÇ       ‚îú‚îÄ‚îÄ biografiasAgent.js      # 206 biografias com busca inteligente
‚îÇ       ‚îú‚îÄ‚îÄ epocaDetalhadaAgent.js  # Relat√≥rios completos de √©pocas
‚îÇ       ‚îú‚îÄ‚îÄ classificacoesAgent.js  # Hist√≥rico de classifica√ß√µes
‚îÇ       ‚îú‚îÄ‚îÄ resultadosAgent.js      # Resultados jogo a jogo
‚îÇ       ‚îú‚îÄ‚îÄ jogadoresAgent.js       # Informa√ß√µes de jogadores
‚îÇ       ‚îú‚îÄ‚îÄ livrosAgent.js          # Biblioteca do clube
‚îÇ       ‚îú‚îÄ‚îÄ presidentesAgent.js     # Hist√≥ria dos presidentes
‚îÇ       ‚îî‚îÄ‚îÄ fundacaoAgent.js        # Funda√ß√£o e primeiros anos
‚îÇ
‚îú‚îÄ‚îÄ üìÇ public/                       # Interface web (frontend)
‚îÇ   ‚îú‚îÄ‚îÄ index.html                  # P√°gina principal
‚îÇ   ‚îú‚îÄ‚îÄ styles.css                  # Estilos CSS com design system
‚îÇ   ‚îú‚îÄ‚îÄ script.js                   # L√≥gica do cliente
‚îÇ   ‚îî‚îÄ‚îÄ mirobaldo_chatbot.png       # Logo do chatbot
‚îÇ
‚îú‚îÄ‚îÄ üìÇ dados/                        # Base de conhecimento hist√≥rico
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ biografias/              # 206 ficheiros de biografias
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ historia_hassan_nader.md
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ historia_paco_fortes.md
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ... (204 mais)
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ classificacoes/          # Tabelas classificativas
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ classificacoes_completas.md
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ resultados/              # Resultados hist√≥ricos
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ resultados_completos.md
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ jogadores/               # Listas de jogadores
‚îÇ   ‚îî‚îÄ‚îÄ üìÇ outros/                  # Dados adicionais
‚îÇ
‚îú‚îÄ‚îÄ üìÇ config/                       # Configura√ß√µes
‚îÇ   ‚îî‚îÄ‚îÄ .env                        # Vari√°veis de ambiente (n√£o versionado)
‚îÇ
‚îú‚îÄ‚îÄ üìÇ shell_scripts/                # Scripts de gest√£o do sistema
‚îú‚îÄ‚îÄ üìÇ docs/                         # Documenta√ß√£o completa
‚îú‚îÄ‚îÄ üìÇ node_modules/                 # Depend√™ncias (n√£o versionado)
‚îú‚îÄ‚îÄ .gitignore                       # Ficheiros ignorados pelo Git
‚îú‚îÄ‚îÄ package.json                     # Configura√ß√£o do projeto Node.js
‚îú‚îÄ‚îÄ package-lock.json                # Lock de vers√µes de depend√™ncias
‚îî‚îÄ‚îÄ README.md                        # Este ficheiro
```

---

## üí¨ Exemplos de Uso

### Biografias
```
üë§ "Quem foi Hassan Nader?"
üë§ "Biografia de Paco Fortes"
üë§ "Fala-me sobre Jo√£o Gralho"
üë§ "Ant√≥nio Gago"
```
**Resultado:** Retorna biografia completa em Markdown (80-144 linhas) com toda a carreira no Farense.

### √âpocas Detalhadas
```
üìÖ "√©poca 1994/95"
üìÖ "resultados da √©poca 1990/91"
üìÖ "90/91"
üìÖ "temporada 1989/90"
```
**Resultado:** Relat√≥rio completo com classifica√ß√£o final + todos os 34-38 jogos da √©poca.

### Classifica√ß√µes
```
üèÜ "Qual foi a melhor classifica√ß√£o do Farense?"
üèÜ "classifica√ß√£o 1994/95"
üèÜ "tabela classificativa"
```

### Resultados
```
‚öΩ "resultado farense vs benfica 1995"
‚öΩ "jogos da ta√ßa de portugal 1990"
‚öΩ "golos marcados em 94/95"
```

### Hist√≥ria do Clube
```
üìñ "Quando foi fundado o Farense?"
üìñ "Hist√≥ria da funda√ß√£o"
üìñ "Presidentes do clube"
üìñ "Livros sobre o Farense"
```

---

## üé® Design e Interface

### Paleta de Cores

| Cor | Hex | Uso |
|-----|-----|-----|
| üî¥ Farense Red | `#c41e3a` | Cor principal do clube |
| ‚ö´ Farense Black | `#0a0a0a` | Cor secund√°ria |
| ‚ö™ White | `#ffffff` | Texto principal |
| üåë Background | `#0f0f0f` | Fundo da aplica√ß√£o |
| üí¨ User Message | `#1a1a1a` | Fundo das mensagens do utilizador |
| ü§ñ Bot Message | `#0d0d0d` | Fundo das respostas do bot |

### Tipografia

- **T√≠tulos e corpo**: Space Grotesk (Google Fonts)
- **C√≥digo e monospace**: JetBrains Mono (Google Fonts)

---

## üîß Configura√ß√£o Avan√ßada

### Vari√°veis de Ambiente (.env)

```bash
# Chave API da OpenAI (obrigat√≥rio)
OPENAI_API_KEY=sk-sua-chave-aqui

# Porta do servidor (opcional, padr√£o: 3000)
PORT=3000

# N√≠vel de log (opcional)
LOG_LEVEL=info
```

### Personaliza√ß√£o de Agentes

Cada agente em `src/agents/` pode ser personalizado:

```javascript
// Exemplo: Aumentar limite de resultados em biografiasAgent.js
if (results.length >= 10) break; // Altere de 5 para 10
```

---

## üß™ Testes e Valida√ß√£o

### Scripts de Teste Inclu√≠dos

```bash
# Testar todas as varia√ß√µes de biografias (9 formatos)
bash /tmp/test_all_bio_formats.sh

# Testar todas as varia√ß√µes de √©pocas (10 formatos)
bash /tmp/test_epoca_queries.sh
```

### Resultados Esperados

‚úÖ **Biografias**: 100% de sucesso (9/9 testes)
- Retornam 80-144 linhas de Markdown completo
- Todas come√ßam com `#` (t√≠tulo)

‚úÖ **√âpocas**: 100% de sucesso (10/10 testes)
- Retornam 74-81 linhas de Markdown completo
- Incluem classifica√ß√£o + resultados completos

---

## üìä Estat√≠sticas do Projeto

- **üìù 206 biografias** completas e verificadas
- **üèÜ 70+ √©pocas** com dados completos
- **‚öΩ 2500+ resultados** de jogos
- **üìÇ 2553 ficheiros** no reposit√≥rio
- **üíæ 278.008 linhas** de c√≥digo e dados
- **üéØ 8 agentes** especializados
- **üöÄ Resposta instant√¢nea** para biografias e √©pocas (sem API call)

---

## ü§ù Contribuir para o Projeto

Contribui√ß√µes s√£o bem-vindas! Para contribuir:

1. **Fork** o projeto
2. Crie uma **branch** para a sua feature (`git checkout -b feature/MinhaFeature`)
3. **Commit** as suas altera√ß√µes (`git commit -m 'Adiciona MinhaFeature'`)
4. **Push** para a branch (`git push origin feature/MinhaFeature`)
5. Abra um **Pull Request**

### Diretrizes de Contribui√ß√£o

- ‚úÖ Mantenha o foco em **dados hist√≥ricos verificados**
- ‚úÖ Siga o **estilo de c√≥digo** existente
- ‚úÖ Adicione **testes** para novas funcionalidades
- ‚úÖ Atualize a **documenta√ß√£o** conforme necess√°rio
- ‚ùå **N√£o invente** informa√ß√µes sobre o clube

---

## üêõ Resolu√ß√£o de Problemas

### Problema: "Cannot find module"
**Solu√ß√£o:**
```bash
rm -rf node_modules package-lock.json
npm install
```

### Problema: "Port 3000 already in use"
**Solu√ß√£o:**
```bash
# macOS/Linux
lsof -ti:3000 | xargs kill -9

# Ou altere a porta no .env
PORT=3001
```

### Problema: "OpenAI API error"
**Solu√ß√£o:**
- Verifique se a chave API est√° correta no `config/.env`
- Confirme que tem cr√©ditos na sua conta OpenAI
- Teste a chave em: https://platform.openai.com/account/api-keys

---

## üìö Documenta√ß√£o Adicional

Para mais informa√ß√µes detalhadas, consulte:

- [`docs/ESTRUTURA_PROJETO.md`](docs/ESTRUTURA_PROJETO.md) - Estrutura completa do projeto
- [`docs/GUIA_USO.md`](docs/GUIA_USO.md) - Guia completo de utiliza√ß√£o
- [`docs/RELATORIO_ORGANIZACAO.md`](docs/RELATORIO_ORGANIZACAO.md) - Organiza√ß√£o do sistema
- [`INICIO_RAPIDO.md`](INICIO_RAPIDO.md) - Guia de in√≠cio r√°pido

---

## üìù Licen√ßa

Este projeto est√° licenciado sob a **MIT License** - veja o ficheiro [LICENSE](LICENSE) para detalhes.

---

## üë• Autores e Reconhecimentos

**Desenvolvido com:** ü§ñ [Claude Code](https://claude.com/claude-code)

**Dados hist√≥ricos compilados de:**
- Arquivo hist√≥rico do Sporting Clube Farense
- [Blog Algarve e Alentejo](http://algarvalentejo.blogspot.com)
- Documenta√ß√£o oficial do clube
- Contribui√ß√µes de adeptos farenses

---

## üìû Suporte e Contacto

- **Issues**: [GitHub Issues](https://github.com/DrNOFX97/Mirobaldo/issues)
- **Discuss√µes**: [GitHub Discussions](https://github.com/DrNOFX97/Mirobaldo/discussions)

---

<div align="center">

**Feito com ‚ù§Ô∏è pelos Le√µes de Faro ü¶Å**

*Preservando a hist√≥ria do Sporting Clube Farense desde 1910*

</div>
